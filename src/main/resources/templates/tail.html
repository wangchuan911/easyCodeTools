<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>tail log</title>
</head>
<script>
  var init = function () {
    // 指定websocket路径
    var websocket = new WebSocket('ws://[[${ip}]]:[[${port}]]/tail');
    websocket.onmessage = function (event) {
      // 接收服务端的实时日志并添加到HTML页面中
      var container = document.getElementById("log-container")
      container.innerText += event.data;
      // 滚动条滚动到最低部
      container.scrollTop = container.scrollHeight;

    };
    websocket.onopen = function (event) {
      console.log("websocket 连接打开");
    };

    // websocket连接关闭
    websocket.onclose = function (event) {
      console.log("websocket 连接关闭");
    };
    setInterval(function () {
      websocket.send("asd");
    }, 2000, 2000)
  };
</script>
<style type="text/css">
  html {
    background: #333;
    color: #aaa;
  }
</style>
<body onload="init()">
<div id="log-container" style="height: 90vh; overflow-y: scroll; background: #333; color: #aaa; padding: 10px;">
  <div>
  </div>
</div>
</body>
</html>
